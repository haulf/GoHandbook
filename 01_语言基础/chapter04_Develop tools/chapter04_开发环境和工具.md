## 4 开发环境与其它工具

​    因为Go语言还是一门相对年轻的编程语言，所以不管是在集成开发环境还是相关的插件方面，发展都不是很成熟。不过目前还是有一些IDE能够较好地支持Go的开发，有些开发工具甚至是跨平台的，可以在Linux、Mac OS X或者Windows下工作。

### 4.1 编辑器和集成开发环境

- SublimeText是一个革命性的跨平台（Linux、Mac OS X、Windows）文本编辑器，它支持编写非常多的编程语言代码。对于Go而言，有一个插件叫做GoSublime来支持代码补全和代码模版。
- GoLand是一款非常出名的Go开发工具。

### 4.2 调试器

​    应用程序的开发过程中调试是必不可少的一个环节，因此有一个好的调试器是非常重要的，可惜的是，Go在这方面的发展还不是很完善。目前可用的调试器是gdb。如果不想使用调试器，可以按照下面的一些有用的方法来达到基本调试的目的：

1. 在合适的位置使用打印语句输出相关变量的值（print/println 和fmt.Print/fmt.Println/fmt.Printf）。
2. 在fmt.Printf中使用下面的说明符来打印有关变量的相关信息：

   -%+v 打印包括字段在内的实例的完整信息

   -%#v 打印包括字段和限定类型名称在内的实例的完整信息

   -%T 打印某个类型的完整说明

3. 使用panic语句来获取栈跟踪信息（直到 panic 时所有被调用函数的列表）。
4. 使用关键字defer来跟踪代码执行过程。

### 4.3 构建并运行Go程序

   使用Go自带的更加方便的工具来构建应用程序：

- go build 编译并安装自身包和依赖包
- go install 安装自身包和依赖包

### 4.5 格式化代码

​    Go开发团队不想要Go语言像许多其它语言那样总是在为代码风格而引发无休止的争论，浪费大量宝贵的开发时间，因此制作了一个工具：go fmt（gofmt）。这个工具可以将的源代码格式化成符合官方统一标准的风格，属于语法风格层面上的小型重构。遵循统一的代码风格是Go开发中无可撼动的铁律，因此必须在编译或提交版本管理系统之前使用gofmt来格式化的代码。

​    尽管这种做法也存在一些争论，但使用gofmt后不再需要自成一套代码风格而是和所有人使用相同的规则。这不仅增强了代码的可读性，而且在接手外部Go项目时，可以更快地了解其代码的含义。此外，大多数开发工具也都内置了这一功能。

​    Go对于代码的缩进层级方面使用tab还是空格并没有强制规定，一个tab可以代表4个或8个空格。在实际开发中，1个tab 应该代表4个空格。

​    在命令行输入gofmt –w program.go 会格式化该源文件的代码然后将格式化后的代码覆盖原始内容（如果不加参数 -w 则只会打印格式化后的结果而不重写文件）；gofmt -w *.go 会格式化并重写所有Go 源文件；gofmt map1会格式化并重写map1目录及其子目录下的所有Go源文件。

​    gofmt也可以通过在参数-r后面加入用双引号括起来的替换规则实现代码的简单重构，规则的格式：<原始内容> -> <替换内容>。

​    实例：

```go
   gofmt -r “(a) -> a” –w*.go
```

​    上面的代码会将源文件中没有意义的括号去掉。

```go
   gofmt -r “a[n:len(a)] -> a[n:]” –w *.go
```

​    上面的代码会将源文件中多余的 len(a) 去掉。

```go
   gofmt –r ‘A.Func1(a,b)-> A.Func2(b,a)’ –w *.go
```

​    上面的代码会将源文件中符合条件的函数的参数调换位置。

### 4.6 生成代码文档

​    godoc 工具会从 Go 程序和包文件中提取顶级声明的首行注释以及每个对象的相关注释，并生成相关文档。它也可以作为一个提供在线文档浏览的 web 服务器，http://golang.org 就是通过这种形式实现的。

一般用法

- go doc package 获取包的文档注释，例如：go doc fmt 会显示使用 godoc 生成的 fmt 包的文档注释。
- go doc package/subpackage 获取子包的文档注释，例如：go doc container/list。
- go doc package function 获取某个函数在某个包中的文档注释，例如：go doc fmt Printf 会显示有关fmt.Printf()的使用说明。

​    这个工具只能获取在 Go 安装目录下.../go/src 中的注释内容。此外，它还可以作为一个本地文档浏览 web 服务器。在命令行输入 godoc -http=:6060，然后使用浏览器打开http://localhost:6060 后，就可以看到本地文档浏览服务器提供的页面。

​    godoc 也可以用于生成非标准库的Go 源码文件的文档注释。

### 4.7 其它工具

​    Go自带的工具集主要使用脚本和Go语言自身编写的，目前版本的Go实现了以下三个工具：

* go install 是安装Go包的工具，主要用于安装非标准库的包文件，将源代码编译成对象文件。
* go fix 用于将的Go代码从旧的发行版迁移到最新的发行版，它主要负责简单的、重复的、枯燥无味的修改工作，如果像API等复杂的函数修改，工具则会给出文件名和代码行数的提示以便让开发人员快速定位并升级代码。Go开发团队一般也使用这个工具升级Go内置工具以及谷歌内部项目的代码。go fix之所以能够正常工作是因为Go在标准库就提供生成抽象语法树和通过抽象语法树对代码进行还原的功能。该工具会尝试更新当前目录下的所有Go源文件，并在完成代码更新后在控制台输出相关的文件名称。
* go test 是一个轻量级的单元测试框架。

​    可以在终端里输入go，直接查看其帮助信息，以看到go支持的命令工具。
